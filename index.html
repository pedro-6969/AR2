<script src="https://cdn.jsdelivr.net/gh/aframevr/aframe@1c2407b26c61958baa93967b5412487cd94b290b/dist/aframe-master.min.js"></script>
<script src="https://raw.githack.com/AR-js-org/AR.js/master/aframe/build/aframe-ar-nft.js"></script>

<style>
  .arjs-loader {
    height: 100%;
    width: 100%;
    position: absolute; top: 0; left: 0;
    background-color: rgba(0,0,0,0.8);
    z-index: 9999; display: flex; justify-content: center; align-items: center;
  }
  .arjs-loader div { text-align: center; font-size: 1.25em; color: white; }
</style>

<body style="margin:0; overflow:hidden;">
  <div class="arjs-loader"><div>Loading, please wait...</div></div>

  <a-scene
    vr-mode-ui="enabled: false"
    renderer="logarithmicDepthBuffer: true"
    embedded
    arjs="trackingMethod: best; sourceType: webcam; debugUIEnabled: false;"
  >
    <!-- MARCADOR NFT 1 -->
    <a-nft
      type="nft"
      url="https://pedro-6969.github.io/AR2/foto/foto1/foto1"
      smooth="true" smoothCount="10" smoothTolerance=".01" smoothThreshold="5"
    >
      <!-- ENVOLVA O MODELO EM UMA ENTIDADE COM A CLASSE 'clickable' -->
      <a-entity id="personagem1" class="clickable"
        gltf-model="https://pedro-6969.github.io/AR2/foto/modelo/scene.gltf"
        scale="1 1 1"
        position="0 0 0">
      </a-entity>
    </a-nft>

      <!-- MARCADOR NFT 2 -->
    <a-nft
      type="nft"
      url="https://pedro-6969.github.io/AR2/foto/foto2/foto2"
      smooth="true" smoothCount="10" smoothTolerance=".01" smoothThreshold="5"
    >
      <!-- ENVOLVA O MODELO EM UMA ENTIDADE COM A CLASSE 'clickable' -->
      <a-entity id="personagem2" class="clickable"
        gltf-model="https://pedro-6969.github.io/AR2/foto/modelo/scene.gltf"
        scale="1 1 1"
        position="0 0 0">
      </a-entity>
    </a-nft>

      <!-- MARCADOR NFT 3 -->
    <a-nft
      type="nft"
      url="https://pedro-6969.github.io/AR2/foto/foto3/foto3"
      smooth="true" smoothCount="10" smoothTolerance=".01" smoothThreshold="5"
    >
      <!-- ENVOLVA O MODELO EM UMA ENTIDADE COM A CLASSE 'clickable' -->
      <a-entity id="personagem3" class="clickable"
        gltf-model="https://pedro-6969.github.io/AR2/foto/modelo/scene.gltf"
        scale="1 1 1"
        position="0 0 0">
      </a-entity>
    </a-nft>

    <!-- CÂMERA + CURSOR/RAYCASTER -->
    <!-- rayOrigin: mouse permite clicar/toque na tela; o raycaster só acerta objetos com a classe configurada -->
    <a-entity camera look-controls="enabled: false">
      <a-cursor
        raycaster="objects: .clickable; far: 1000;"
        cursor="fuse: false; rayOrigin: mouse">
      </a-cursor>
    </a-entity>
  </a-scene>

  <script>
    // Detecta qual modelo foi encontrado
    document.querySelectorAll('a-nft').forEach(marker => {
      marker.addEventListener('markerFound', () => {
        console.log('Marcador detectado:', marker.getAttribute('url'));
      });
    });

    // Quando o GLTF terminar de carregar, anexamos os eventos de clique/toque
    // Pega todos os modelos
    document.querySelectorAll('.clickable').forEach(alvo => {

    // Espera o modelo carregar
    alvo.addEventListener('model-loaded', () => {

        // Clique com mouse ou toque (via raycaster)
        alvo.addEventListener('click', () => {
          alert(`Você clicou no modelo: ${alvo.id}`);
        });

        // Fallback para toque direto
        alvo.addEventListener('touchstart', () => {
          alert(`Você tocou no modelo: ${alvo.id}`);
        }, { passive: true });
      });
    });

  </script>
</body>

<!-- https://carnaux.github.io/NFT-Marker-Creator/#/ -->